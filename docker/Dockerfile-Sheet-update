# ✅ Python 3.10 slim 이미지 사용
FROM python:3.10-slim

# ✅ 작업 디렉토리 설정
WORKDIR /app

# ✅ requirements 복사 및 패키지 설치
COPY requirements.txt ./ 
RUN pip install --no-cache-dir -r requirements.txt

# ✅ 실행 스크립트 및 설정 파일 복사
COPY ./ngn_wep/GA4_API/sheet_update_custom.py /app/sheet_update_custom.py
COPY ./config/ngn.env /app/ngn.env
COPY ./config/service-account.json /app/service-account.json

# ✅ 환경 변수 설정 (Cloud Run에서 자동 주입되더라도 fallback 제공)
ENV GOOGLE_APPLICATION_CREDENTIALS="/app/service-account.json"
ENV RUN_MODE="today"

# ✅ 실행 명령어 (기본값 today 실행)
ENTRYPOINT ["python", "/app/sheet_update_custom.py"]

