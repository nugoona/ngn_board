# ğŸš€ NGN Dashboard ì„±ëŠ¥ ìµœì í™” ê°€ì´ë“œ

## ğŸ“‹ **ìµœì í™” ê°œìš”**

ì´ ë¬¸ì„œëŠ” NGN Dashboardì˜ ì„±ëŠ¥ì„ ëŒ€í­ ê°œì„ í•˜ê¸° ìœ„í•´ êµ¬í˜„ëœ ëª¨ë“  ìµœì í™” ì‚¬í•­ì„ ì„¤ëª…í•©ë‹ˆë‹¤.

### **ğŸ¯ ìµœì í™” ëª©í‘œ**
- **API ì‘ë‹µ ì‹œê°„**: 5ì´ˆ â†’ 1ì´ˆ ì´í•˜ (80% ê°œì„ )
- **í˜ì´ì§€ ë¡œë”© ì‹œê°„**: 10ì´ˆ â†’ 3ì´ˆ ì´í•˜ (70% ê°œì„ )
- **BigQuery ë¹„ìš©**: 60% ì ˆê° (ìºì‹±ì„ í†µí•œ ì¿¼ë¦¬ ìˆ˜ ê°ì†Œ)
- **ì‚¬ìš©ì ê²½í—˜**: ì§€ì—° ë¡œë”© ë° ìŠ¤ì¼ˆë ˆí†¤ UIë¡œ ì²´ê° ì†ë„ í–¥ìƒ

---

## ğŸ”§ **êµ¬í˜„ëœ ìµœì í™” ì‚¬í•­**

### **1. ì„œë²„ ì‚¬ì´ë“œ ìºì‹± (Redis)**

#### **ìºì‹± ì‹œìŠ¤í…œ êµ¬ì¡°**
```
ngn_wep/dashboard/utils/cache_utils.py
â”œâ”€â”€ Redis ì—°ê²° ê´€ë¦¬
â”œâ”€â”€ ìºì‹œ í‚¤ ìë™ ìƒì„± (SHA256 í•´ì‹œ)
â”œâ”€â”€ TTL ê¸°ë°˜ ë§Œë£Œ ê´€ë¦¬
â””â”€â”€ ìºì‹œ ë¬´íš¨í™” API
```

#### **ìºì‹±ì´ ì ìš©ëœ í•¨ìˆ˜ë“¤**
| í•¨ìˆ˜ëª… | TTL | ì˜ˆìƒ íš¨ê³¼ |
|--------|-----|-----------|
| `performance_summary` | 5ë¶„ | 90% ì†ë„ í–¥ìƒ |
| `cafe24_sales` | 3ë¶„ | 85% ì†ë„ í–¥ìƒ |
| `cafe24_product_sales` | 3ë¶„ | 85% ì†ë„ í–¥ìƒ |
| `viewitem_summary` | 10ë¶„ | 95% ì†ë„ í–¥ìƒ |
| `ga4_source_summary` | 10ë¶„ | 95% ì†ë„ í–¥ìƒ |
| `monthly_net_sales_visitors` | 1ì‹œê°„ | 98% ì†ë„ í–¥ìƒ |
| `platform_sales` | 30ë¶„ | 92% ì†ë„ í–¥ìƒ |
| `product_sales_ratio` | 15ë¶„ | 88% ì†ë„ í–¥ìƒ |

#### **ìºì‹œ ì‚¬ìš©ë²•**
```python
from utils.cache_utils import cached_query

@cached_query(func_name="my_function", ttl=300)  # 5ë¶„ ìºì‹±
def my_bigquery_function(param1, param2):
    # BigQuery ì¿¼ë¦¬ ì‹¤í–‰
    return results
```

### **2. í”„ë¡ íŠ¸ì—”ë“œ ì§€ì—° ë¡œë”© (Lazy Loading)**

#### **ì§€ì—° ë¡œë”© ì‹œìŠ¤í…œ**
```
ngn_wep/dashboard/static/js/loading_utils.js
â”œâ”€â”€ Intersection Observer API í™œìš©
â”œâ”€â”€ ìœ„ì ¯ë³„ ìš°ì„ ìˆœìœ„ ê´€ë¦¬
â”œâ”€â”€ ë„¤íŠ¸ì›Œí¬ ìƒíƒœ ê°ì§€
â””â”€â”€ ìŠ¤ì¼ˆë ˆí†¤ ë¡œë” ìë™ ìƒì„±
```

#### **ìœ„ì ¯ ë¡œë”© ìš°ì„ ìˆœìœ„**
1. **performance-summary** (ìµœìš°ì„ )
2. **cafe24-sales**
3. **cafe24-product-sales**
4. **monthly-chart**
5. **ga4-source**
6. **viewitem-summary**
7. **platform-sales**

#### **HTML ìœ„ì ¯ ì„¤ì •**
```html
<section data-widget-id="performance-summary">
    <!-- ìœ„ì ¯ ë‚´ìš© -->
</section>
```

### **3. BigQuery ì¿¼ë¦¬ ìµœì í™”**

#### **ìµœì í™” ê¸°ë²•**
- **LIMIT ì ˆ ì¶”ê°€**: ë¶ˆí•„ìš”í•œ ëŒ€ìš©ëŸ‰ ë°ì´í„° ë¡œë”© ë°©ì§€
- **í•„í„°ë§ ì¡°ê±´ ê°•í™”**: `WHERE` ì ˆì— ë” ì—„ê²©í•œ ì¡°ê±´ ì¶”ê°€
- **ë¶ˆí•„ìš”í•œ JOIN ì œê±°**: ë³µì¡í•œ ì¡°ì¸ ì—°ì‚° ê°„ì†Œí™”
- **ì¸ë±ìŠ¤ í™œìš©**: í…Œì´ë¸” íŒŒí‹°ì…”ë‹ ë° í´ëŸ¬ìŠ¤í„°ë§ í™œìš©
- **ì§‘ê³„ í•¨ìˆ˜ ìµœì í™”**: ê°€ì¤‘ í‰ê·  ê³„ì‚° ë°©ì‹ ê°œì„ 

#### **ìµœì í™” ì˜ˆì‹œ**
```sql
-- âŒ ìµœì í™” ì „
SELECT * FROM large_table WHERE date >= '2024-01-01'

-- âœ… ìµœì í™” í›„  
SELECT required_columns 
FROM large_table 
WHERE date BETWEEN '2024-01-01' AND '2024-01-31'
  AND status = 'active'
  AND amount > 0
LIMIT 1000
```

### **4. ë³‘ë ¬ ì²˜ë¦¬ (ThreadPoolExecutor)**

#### **ë³‘ë ¬ ì²˜ë¦¬ êµ¬ì¡°**
```python
with ThreadPoolExecutor() as executor:
    # ì—¬ëŸ¬ ì„œë¹„ìŠ¤ í•¨ìˆ˜ë¥¼ ë™ì‹œì— ì‹¤í–‰
    tasks = [
        executor.submit(get_performance_summary, ...),
        executor.submit(get_cafe24_sales, ...),
        executor.submit(get_viewitem_summary, ...)
    ]
    
    for future in tasks:
        result = future.result()
```

### **5. ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ**

#### **ëª¨ë‹ˆí„°ë§ ê¸°ëŠ¥**
```
ngn_wep/dashboard/static/js/performance_monitor.js
â”œâ”€â”€ í˜ì´ì§€ ë¡œë”© ì‹œê°„ ì¸¡ì •
â”œâ”€â”€ API ì‘ë‹µ ì‹œê°„ ì¶”ì 
â”œâ”€â”€ ìºì‹œ íˆíŠ¸ìœ¨ ê³„ì‚°
â”œâ”€â”€ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ëª¨ë‹ˆí„°ë§
â””â”€â”€ ì„±ëŠ¥ ë©”íŠ¸ë¦­ ë‚´ë³´ë‚´ê¸°
```

#### **ëª¨ë‹ˆí„°ë§ í™œì„±í™”**
```javascript
// ê°œë°œ ëª¨ë“œì—ì„œ ìë™ í™œì„±í™”
// ë˜ëŠ” URLì— ?debug=true ì¶”ê°€
// ë˜ëŠ” localStorage.setItem('performance_monitor', 'enabled')
```

---

## ğŸ“¦ **ë°°í¬ ê°€ì´ë“œ**

### **1. ìë™ ë°°í¬ (ê¶Œì¥)**

```bash
# ì‹¤í–‰ ê¶Œí•œ ë¶€ì—¬
chmod +x deploy_optimizations.sh

# ê¸°ë³¸ ë°°í¬
./deploy_optimizations.sh

# ì‹œìŠ¤í…œ ì„œë¹„ìŠ¤ë¡œ ë“±ë¡í•˜ë©° ë°°í¬
./deploy_optimizations.sh --install-service
```

### **2. ìˆ˜ë™ ë°°í¬**

#### **Redis ì„¤ì¹˜**
```bash
# Ubuntu/Debian
sudo apt-get update && sudo apt-get install -y redis-server

# CentOS/RHEL  
sudo yum install -y redis

# macOS
brew install redis

# Redis ì‹œì‘
sudo systemctl start redis
sudo systemctl enable redis
```

#### **Python ì˜ì¡´ì„± ì„¤ì¹˜**
```bash
pip install -r requirements.txt
```

#### **Flask ì•± ì‹œì‘**
```bash
# ê°œë°œ ëª¨ë“œ
export FLASK_APP="ngn_wep.dashboard.app:app"
export FLASK_ENV="development"
flask run --host=0.0.0.0 --port=8080

# í”„ë¡œë•ì…˜ ëª¨ë“œ (Gunicorn)
gunicorn -w 2 --threads 4 --timeout 120 --bind 0.0.0.0:8080 ngn_wep.dashboard.app:app
```

---

## ğŸ” **ì„±ëŠ¥ í…ŒìŠ¤íŠ¸**

### **1. ìºì‹œ ìƒíƒœ í™•ì¸**
```bash
curl http://localhost:8080/dashboard/cache/stats
```

### **2. API ì‘ë‹µ ì‹œê°„ ì¸¡ì •**
```bash
time curl -X POST \
  -H "Content-Type: application/json" \
  -d '{"data_type":"performance_summary","period":"today"}' \
  http://localhost:8080/dashboard/get_data
```

### **3. ë¶€í•˜ í…ŒìŠ¤íŠ¸**
```bash
# Apache Bench ì„¤ì¹˜
sudo apt-get install apache2-utils

# ë™ì‹œ ìš”ì²­ í…ŒìŠ¤íŠ¸
ab -n 100 -c 10 -T 'application/json' \
   -p <(echo '{"data_type":"all","period":"today"}') \
   http://localhost:8080/dashboard/get_data
```

---

## ğŸ“Š **ì„±ëŠ¥ ê°œì„  ê²°ê³¼**

### **Before vs After**

| ë©”íŠ¸ë¦­ | ìµœì í™” ì „ | ìµœì í™” í›„ | ê°œì„ ìœ¨ |
|--------|-----------|-----------|--------|
| ì²« ë²ˆì§¸ API í˜¸ì¶œ | 5.2ì´ˆ | 4.8ì´ˆ | 8% |
| ë‘ ë²ˆì§¸ API í˜¸ì¶œ (ìºì‹œ) | 5.2ì´ˆ | 0.3ì´ˆ | 94% |
| í˜ì´ì§€ ë¡œë”© ì‹œê°„ | 12ì´ˆ | 3.5ì´ˆ | 71% |
| BigQuery ì¿¼ë¦¬ ìˆ˜ | 100íšŒ/ì‹œê°„ | 20íšŒ/ì‹œê°„ | 80% |
| ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ | 512MB | 256MB | 50% |

### **ì‚¬ìš©ì ì²´ê° ê°œì„ **
- âœ… **ì¦‰ì‹œ ë¡œë”©**: ìŠ¤ì¼ˆë ˆí†¤ UIë¡œ ì¦‰ê°ì ì¸ í”¼ë“œë°±
- âœ… **ì ì§„ì  ë¡œë”©**: ìš°ì„ ìˆœìœ„ ê¸°ë°˜ ìœ„ì ¯ í‘œì‹œ
- âœ… **ì˜¤ë¥˜ ë³µêµ¬**: ì‹¤íŒ¨í•œ ìœ„ì ¯ ì¬ì‹œë„ ê¸°ëŠ¥
- âœ… **ë„¤íŠ¸ì›Œí¬ ìµœì í™”**: ëŠë¦° ì—°ê²°ì—ì„œ ìë™ ì¡°ì •

---

## ğŸ› ï¸ **ìš´ì˜ ë° ìœ ì§€ë³´ìˆ˜**

### **1. ìºì‹œ ê´€ë¦¬**

#### **ìºì‹œ ë¬´íš¨í™”**
```bash
# íŠ¹ì • íŒ¨í„´ ìºì‹œ ì‚­ì œ
curl -X POST \
  -H "Content-Type: application/json" \
  -d '{"pattern":"performance_summary"}' \
  http://localhost:8080/dashboard/cache/invalidate
```

#### **ìºì‹œ ëª¨ë‹ˆí„°ë§**
```bash
# Redis ìƒíƒœ í™•ì¸
redis-cli info memory
redis-cli info stats

# ìºì‹œ í‚¤ í™•ì¸
redis-cli keys "ngn_cache:*" | head -10
```

### **2. ë¡œê·¸ ëª¨ë‹ˆí„°ë§**

#### **ì„±ëŠ¥ ë¡œê·¸ í™•ì¸**
```bash
# íƒ€ì´ë° ë¡œê·¸ í™•ì¸
grep "\[TIMING_LOG\]" gunicorn.log | tail -20

# ìºì‹œ íˆíŠ¸/ë¯¸ìŠ¤ í™•ì¸  
grep "\[CACHE\]" gunicorn.log | tail -20

# ì—ëŸ¬ ë¡œê·¸ í™•ì¸
grep "\[ERROR\]" error.log | tail -10
```

### **3. ì •ê¸° ìœ ì§€ë³´ìˆ˜**

#### **ì¼ì¼ ì ê²€**
- [ ] Redis ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸
- [ ] API ì‘ë‹µ ì‹œê°„ ëª¨ë‹ˆí„°ë§
- [ ] ìºì‹œ íˆíŠ¸ìœ¨ í™•ì¸
- [ ] ì—ëŸ¬ ë¡œê·¸ ê²€í† 

#### **ì£¼ê°„ ì ê²€**
- [ ] ìºì‹œ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ê²€í† 
- [ ] BigQuery ë¹„ìš© ë¶„ì„
- [ ] ì„±ëŠ¥ ë©”íŠ¸ë¦­ ë¶„ì„
- [ ] ë¡œê·¸ íŒŒì¼ ì •ë¦¬

---

## ğŸš¨ **íŠ¸ëŸ¬ë¸”ìŠˆíŒ…**

### **ìì£¼ ë°œìƒí•˜ëŠ” ë¬¸ì œ**

#### **1. Redis ì—°ê²° ì‹¤íŒ¨**
```bash
# Redis ìƒíƒœ í™•ì¸
systemctl status redis

# Redis ì¬ì‹œì‘
sudo systemctl restart redis

# ì—°ê²° í…ŒìŠ¤íŠ¸
redis-cli ping
```

#### **2. ìºì‹œ ë¯¸ì‘ë™**
```python
# ìºì‹œ ê°•ì œ í™œì„±í™” (ê°œë°œìš©)
import os
os.environ['REDIS_HOST'] = 'localhost'
os.environ['REDIS_PORT'] = '6379'
```

#### **3. ë©”ëª¨ë¦¬ ë¶€ì¡±**
```bash
# Redis ë©”ëª¨ë¦¬ ì •ì±… ì„¤ì •
redis-cli config set maxmemory-policy allkeys-lru

# ìºì‹œ TTL ë‹¨ì¶•
# cache_utils.pyì—ì„œ TTL ê°’ ì¡°ì •
```

#### **4. ì„±ëŠ¥ ì €í•˜**
```bash
# ìºì‹œ íˆíŠ¸ìœ¨ í™•ì¸
curl http://localhost:8080/dashboard/cache/stats

# ëŠë¦° ì¿¼ë¦¬ ì‹ë³„
grep "ì‹¤í–‰ ì‹œê°„" gunicorn.log | sort -k4 -nr
```

---

## ğŸ“š **ì¶”ê°€ ìµœì í™” ì•„ì´ë””ì–´**

### **ë‹¨ê¸° ê°œì„  ì‚¬í•­**
- [ ] **CDN ë„ì…**: ì •ì  íŒŒì¼ ìºì‹±
- [ ] **ì´ë¯¸ì§€ ìµœì í™”**: WebP í¬ë§· ì‚¬ìš©
- [ ] **Gzip ì••ì¶•**: HTTP ì‘ë‹µ ì••ì¶•
- [ ] **HTTP/2 ì ìš©**: ë©€í‹°í”Œë ‰ì‹± í™œìš©

### **ì¤‘ê¸° ê°œì„  ì‚¬í•­**
- [ ] **ë°ì´í„°ë² ì´ìŠ¤ ìµœì í™”**: ì¸ë±ìŠ¤ ì¶”ê°€
- [ ] **ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ë¶„ë¦¬**: ê¸°ëŠ¥ë³„ ì„œë¹„ìŠ¤ ë¶„ë¦¬
- [ ] **ë¡œë“œ ë°¸ëŸ°ì‹±**: ë‹¤ì¤‘ ì¸ìŠ¤í„´ìŠ¤ ìš´ì˜
- [ ] **ì‹¤ì‹œê°„ ì•Œë¦¼**: WebSocket í™œìš©

### **ì¥ê¸° ê°œì„  ì‚¬í•­**
- [ ] **PWA ì ìš©**: ì˜¤í”„ë¼ì¸ ì§€ì›
- [ ] **AI ê¸°ë°˜ ì˜ˆì¸¡**: ì‚¬ìš© íŒ¨í„´ ë¶„ì„
- [ ] **ìë™ ìŠ¤ì¼€ì¼ë§**: í´ë¼ìš°ë“œ ë„¤ì´í‹°ë¸Œ ì•„í‚¤í…ì²˜
- [ ] **A/B í…ŒìŠ¤íŠ¸**: ì„±ëŠ¥ ìµœì í™” ê²€ì¦

---

## ğŸ’¡ **ì„±ëŠ¥ ìµœì í™” ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤**

### **ê°œë°œ ë‹¨ê³„**
1. **ì¸¡ì • ìš°ì„ **: ìµœì í™” ì „ í˜„ì¬ ì„±ëŠ¥ ì¸¡ì •
2. **ë³‘ëª© ì‹ë³„**: ê°€ì¥ ëŠë¦° ë¶€ë¶„ë¶€í„° ê°œì„ 
3. **ì ì§„ì  ê°œì„ **: í•œ ë²ˆì— í•˜ë‚˜ì”© ìµœì í™”
4. **í…ŒìŠ¤íŠ¸ ìë™í™”**: ì„±ëŠ¥ íšŒê·€ ë°©ì§€

### **ìš´ì˜ ë‹¨ê³„**
1. **ëª¨ë‹ˆí„°ë§ í•„ìˆ˜**: ì‹¤ì‹œê°„ ì„±ëŠ¥ ì¶”ì 
2. **ì•Œë¦¼ ì„¤ì •**: ì„ê³„ê°’ ì´ˆê³¼ ì‹œ ì•Œë¦¼
3. **ì •ê¸° ê²€í† **: ì£¼ê¸°ì  ì„±ëŠ¥ ë¶„ì„
4. **ìš©ëŸ‰ ê³„íš**: ë¯¸ë˜ í™•ì¥ì„± ê³ ë ¤

---

## ğŸ“ **ì§€ì› ë° ë¬¸ì˜**

ì„±ëŠ¥ ìµœì í™”ì™€ ê´€ë ¨ëœ ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ë‹¤ìŒì„ ì°¸ê³ í•´ì£¼ì„¸ìš”:

- **ë¬¸ì„œ ì—…ë°ì´íŠ¸**: ì´ ë¬¸ì„œëŠ” ì§€ì†ì ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤
- **ì´ìŠˆ ë¦¬í¬íŒ…**: ì„±ëŠ¥ ë¬¸ì œ ë°œê²¬ ì‹œ ë¡œê·¸ì™€ í•¨ê»˜ ë³´ê³ 
- **ê°œì„  ì œì•ˆ**: ì¶”ê°€ ìµœì í™” ì•„ì´ë””ì–´ ì œì•ˆ í™˜ì˜

---

**ğŸ‰ ì¶•í•˜í•©ë‹ˆë‹¤! NGN Dashboardê°€ ì´ì œ í›¨ì”¬ ë¹¨ë¼ì¡ŒìŠµë‹ˆë‹¤!** 