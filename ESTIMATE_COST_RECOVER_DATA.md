# 2024-12-01 ~ 2025-11-30 데이터 재수집 비용 계산

## 재수집 스크립트
- **파일**: `recover_2024_12_2025_11_data.py`
- **기간**: 2024년 12월 1일 ~ 2025년 11월 30일 (총 365일)
- **대상 테이블**: `daily_cafe24_sales`

## 비용 계산

### 1. BigQuery 쿼리 비용

#### 무료 할당량
- **월 1TB 무료 스캔** (프로젝트당)
- 월별로 초기화되므로, 한 달에 1TB 이내면 무료

#### 스캔 데이터량 추정

**일일 쿼리당 스캔 데이터량** (추정):
- `cafe24_orders`: 약 50-100MB/일
- `cafe24_order_items_table`: 약 30-50MB/일
- `cafe24_refunds_table`: 약 10-20MB/일
- `company_info`: 약 1MB (매우 작음)
- **합계**: 약 **100-200MB/일**

**365일 총 스캔량**:
- 최소: 100MB × 365 = **36.5GB**
- 최대: 200MB × 365 = **73GB**

#### 실제 비용 (무료 할당량 초과 시)

BigQuery 스캔 비용: **$5/TB** (약 **6,700원/TB**)

- **36.5GB**: 무료 (1TB 무료 할당량 내)
- **73GB**: 무료 (1TB 무료 할당량 내)

**예상 비용: 0원** ✅ (무료 할당량 내)

### 2. Cloud Run Jobs 실행 비용 (해당하는 경우)

만약 Cloud Run Jobs로 실행한다면:

- **메모리**: 512Mi
- **CPU**: 1 vCPU
- **실행 시간**: 약 30-60분 (365일 처리)
- **비용**: 약 $0.10-0.20 (약 130-270원)

하지만 로컬에서 실행하므로 **비용 없음**

### 3. 총 예상 비용

**BigQuery 쿼리 비용**: **0원** (무료 할당량 내)
**Cloud Run 실행 비용**: **0원** (로컬 실행)

**총 예상 비용: 약 0-270원** (무료 할당량 내)

### 참고사항

1. **실제 스캔량은 데이터 크기에 따라 다를 수 있습니다**
   - 주문 건수가 많은 경우 더 많은 데이터를 스캔할 수 있습니다
   - BigQuery 콘솔에서 실제 스캔량을 확인할 수 있습니다

2. **무료 할당량 초과 시**
   - 월 1TB 초과 시: $5/TB (약 6,700원/TB)
   - 예: 2TB 스캔 시 약 13,400원

3. **최적화 팁**
   - 파티셔닝된 테이블은 필요한 파티션만 스캔하므로 비용 절감
   - `daily_cafe24_sales` 테이블이 파티셔닝되어 있다면 비용이 더 적을 수 있습니다

