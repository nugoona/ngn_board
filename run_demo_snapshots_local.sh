#!/bin/bash
# ============================================
# 데모 계정 스냅샷 로컬 테스트 스크립트
# ============================================

# 현재 디렉토리 확인
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
cd "$SCRIPT_DIR"

echo "=========================================="
echo "데모 계정 스냅샷 로컬 테스트"
echo "=========================================="

# ============================================
# 1. 월간 스냅샷 생성 (2025년 12월 예시)
# ============================================
echo ""
echo "📊 [1/3] 월간 스냅샷 생성 중..."
echo "----------------------------------------"
python3 tools/ai_report_test/bq_monthly_snapshot.py demo 2025 12 --save-to-gcs --force

if [ $? -eq 0 ]; then
    echo "✅ 월간 스냅샷 생성 완료!"
else
    echo "❌ 월간 스냅샷 생성 실패"
    exit 1
fi

# ============================================
# 2. 29CM 트렌드 스냅샷 생성
# ============================================
echo ""
echo "📊 [2/3] 29CM 트렌드 스냅샷 생성 중..."
echo "----------------------------------------"
python3 tools/trend_29cm_snapshot.py --company-name demo

if [ $? -eq 0 ]; then
    echo "✅ 29CM 트렌드 스냅샷 생성 완료!"
else
    echo "❌ 29CM 트렌드 스냅샷 생성 실패"
    exit 1
fi

# ============================================
# 3. 에이블리 트렌드 스냅샷 생성
# ============================================
echo ""
echo "📊 [3/3] 에이블리 트렌드 스냅샷 생성 중..."
echo "----------------------------------------"
python3 tools/trend_ably_snapshot.py --company-name demo

if [ $? -eq 0 ]; then
    echo "✅ 에이블리 트렌드 스냅샷 생성 완료!"
else
    echo "❌ 에이블리 트렌드 스냅샷 생성 실패"
    exit 1
fi

echo ""
echo "=========================================="
echo "✅ 모든 스냅샷 생성 완료!"
echo "=========================================="
