<!-- ✅ 오른쪽 하단 고정 버튼 -->
<div id="openCatalogSidebarBtn" class="catalog-toggle-btn" aria-label="카탈로그 열기">
  <span>CATALOG</span>
</div>

<!-- ✅ 카탈로그 사이드바 -->
<div id="catalogSidebar" class="catalog-sidebar-wrapper hidden">
  <div class="loading-spinner"></div>

  <!-- ───────── 헤더 ───────── -->
  <div class="catalog-header">
    <div class="catalog-header-title">META CATALOG</div>
    <div class="catalog-header-right">
      <div class="catalog-header-id">
        카탈로그 ID : <span id="catalogIdText">-</span>
      </div>
      <button id="closeCatalogSidebarBtn" class="catalog-close-btn" aria-label="닫기">×</button>
    </div>
  </div>

  <!-- ───────── 본문 ───────── -->
  <div class="catalog-sidebar-content">

    <!-- ::::: [LIVE] 자동 세트 ::::: -->
    <div class="catalog-subheading">[LIVE] 자동 세트 목록</div>
    <div class="catalog-tables-container">
      <!-- ▸ 28일 베스트 -->
      <div class="catalog-table-card">
        <div class="catalog-table-header">
          <div class="catalog-table-title">최근 28일 베스트 60</div>

        </div>
        <div class="catalog-table-scroll">
          <table class="catalog-table">
            <colgroup><col style="width:60%"><col style="width:20%"><col style="width:20%"></colgroup>
            <thead><tr><th>상품명</th><th>판매수</th><th>제품번호</th></tr></thead>
            <tbody id="best-28-table-body">
              <tr><td colspan="3" class="no-data">데이터를 불러오는 중입니다...</td></tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- ▸ 7일 베스트 -->
      <div class="catalog-table-card">
        <div class="catalog-table-header">
          <div class="catalog-table-title">최근 7일 베스트 20</div>

        </div>
        <div class="catalog-table-scroll">
          <table class="catalog-table">
            <colgroup><col style="width:60%"><col style="width:20%"><col style="width:20%"></colgroup>
            <thead><tr><th>상품명</th><th>판매수</th><th>제품번호</th></tr></thead>
            <tbody id="best-7-table-body">
              <tr><td colspan="3" class="no-data">데이터를 불러오는 중입니다...</td></tr>
            </tbody>
          </table>
        </div>
      </div>
    </div><!-- /.자동 세트 container -->

    <!-- ::::: 수동 세트 블록 ::::: -->
    <div style="margin-top:36px"></div>
    <div class="manual-set-flex-container" style="display:flex;gap:24px;flex-wrap:wrap;">

      <!-- ── 좌측 : URL 세트 카드 ── -->
      <div class="manual-set-left" style="flex:1;min-width:400px;">
        <div class="manual-card">
          <!-- 타이틀을 카드 내부로 이동 -->
          <h3 class="catalog-subheading">자사몰 페이지 제품세트 만들기</h3>

          <!-- URL 입력 -->
          <div class="manual-set-searchbox url-searchbox">
            <input id="manualCategoryUrlInput"
                   type="text"
                   placeholder="자사몰 카테고리 URL을 입력하세요" />
            <button id="manualFetchBtn"
                    class="manual-search-btn"
                    aria-label="실행">
              <svg xmlns="http://www.w3.org/2000/svg"
                   viewBox="0 0 24 24"
                   stroke="currentColor"
                   stroke-width="1.8"
                   fill="none">
                <path stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M21 21l-5.197-5.197m0 0a7.5 7.5 0 1 0-10.607-10.607
                         7.5 7.5 0 0 0 10.607 10.607z" />
              </svg>
            </button>
          </div>

          <div id="manualLoadingSpinner" class="manual-loading-spinner hidden">
            <div class="loading-spinner small"></div><span>수집 중 입니다...</span>
          </div>

          <!-- 수집 결과 -->
          <div class="manual-set-table adjusted" style="margin-top:24px;width:100%;">
            <div class="catalog-table-title">
              수집된 상품 리스트
              <div style="display:flex;justify-content:space-between;align-items:center;margin-top:8px;padding-top:8px;border-top:1px solid rgba(255,255,255,0.2);">
                <button id="toggleAllUrlProductsBtn" class="toggle-all-btn" style="display:none;">전체 선택/해제</button>
                <span id="selectedUrlProductsCount" style="font-size:12px;opacity:0.9;display:none;"></span>
              </div>
            </div>
            <div class="catalog-table-scroll">
              <table class="catalog-table">
                <colgroup><col style="width:40px"><col style="width:calc(100% - 140px)"><col style="width:100px"></colgroup>
                <thead><tr><th><input type="checkbox" id="selectAllUrlProductsCheckbox" style="display:none;"></th><th>상품명</th><th>제품번호</th></tr></thead>
                <tbody id="manualProductTableBody">
                  <tr><td colspan="3" class="no-data">URL 입력 후 실행을 눌러주세요.</td></tr>
                </tbody>
              </table>
            </div>
          </div>

          <!-- 세트명 + 버튼 (카드 맨 아래) -->
          <div class="manual-create-row" style="margin-top:24px;width:100%;">
            <label for="urlSetNameInput">세트명 작성</label>
            <input id="urlSetNameInput" type="text" placeholder="예) [20250601]신제품 페이지 상품" maxlength="100">
            <button id="createUrlSetBtn" class="primary-btn">제품세트 만들기</button>
          </div>
        </div><!-- /.manual-card -->
      </div><!-- /.manual-set-left -->

      <!-- ── 우측 : 검색 세트 카드 ── -->
      <div class="manual-set-right" style="flex:1;min-width:400px;">
        <div class="manual-card">
          <!-- 타이틀을 카드 내부로 이동 -->
          <h3 class="catalog-subheading">수동 제품세트 만들기</h3>

          <!-- 검색 행 -->
          <div class="manual-search-row" style="width:100%;">
            <div class="modern-dropdown" style="max-width:160px; min-width: auto;">
              <select id="manualSearchTypeSelect">
                <option value="product_name">상품명으로 검색</option>
                <option value="product_no">제품번호로 검색</option>
              </select>
            </div>
            <input id="manualSearchInput" type="text" placeholder="검색어를 입력하세요">
            <button id="manualSearchBtn" class="manual-search-btn" aria-label="검색">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="#003366" stroke-width="1.8" fill="none">
                <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0a7.5 7.5 0 1 0-10.607-10.607 7.5 7.5 0 0 0 10.607 10.607z"/>
              </svg>
            </button>
          </div>

          <!-- 검색 결과 -->
          <div class="manual-set-table adjusted" style="margin-top:24px;width:100%;">
          <!-- 검색 로딩 메시지 -->
          <div id="manualSearchLoadingSpinner" class="manual-loading-spinner hidden">
            <div class="loading-spinner small"></div><span>검색 중 입니다...</span>
          </div>




            <div class="catalog-table-title">검색 결과</div>
            <div class="catalog-table-scroll">
              <table class="catalog-table">
                <colgroup><col style="width:25%"><col><col style="width:20%"><col style="width:15%"></colgroup>
                <thead><tr><th>업체명</th><th>상품명</th><th>제품번호</th><th></th></tr></thead>
                <tbody id="manualSearchResultBody">
                  <tr><td colspan="4" class="no-data">검색어를 입력 후 검색을 눌러주세요.</td></tr>
                </tbody>
              </table>
            </div>
          </div>

          <!-- 추가된 상품 -->
          <div class="manual-set-table adjusted" style="margin-top:24px;width:100%;">
            <div class="catalog-table-title">추가된 상품</div>
            <div class="catalog-table-scroll">
              <table class="catalog-table">
                <colgroup><col><col style="width:25%"><col style="width:15%"></colgroup>
                <thead><tr><th>상품명</th><th>제품번호</th><th></th></tr></thead>
                <tbody id="manualSelectedItemBody">
                  <tr><td colspan="3" class="no-data">아직 추가된 상품이 없습니다.</td></tr>
                </tbody>
              </table>
            </div>
          </div>

          <!-- 세트명 + 버튼 (※ 위치를 맨 아래로 이동) -->
          <div class="manual-create-row" style="margin-top:24px;width:100%;">
            <label for="manualSetNameInput">세트명 작성</label>
            <input id="manualSetNameInput" type="text" placeholder="예) [20250601]원피스 상품세트" maxlength="100">
            <button id="createManualSetBtn" class="primary-btn">제품세트 만들기</button>
          </div>
        </div><!-- /.manual-card -->
      </div><!-- /.manual-set-right -->
    </div><!-- /.manual-set-flex-container -->

    <!-- ::::: 팝업 모달 ::::: -->
    <div id="catalogSetModal" class="modal hidden">
      <div class="modal-content">
        <div class="modal-header">
          <span class="modal-title">Catalog Set Preview</span>
          <button class="close-btn" onclick="document.getElementById('catalogSetModal').classList.add('hidden')">×</button>
        </div>
        <div class="modal-body">
          <pre id="catalogJsonDisplay"></pre>
        </div>
      </div>
    </div>
  </div><!-- /.catalog-sidebar-content -->
</div><!-- /.catalog-sidebar-wrapper -->

